<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capitalism Station - General Asset Exporter</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #00ff00;
            line-height: 1.4;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #00ff00;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            text-shadow: 0 0 10px #00ff00;
            margin-bottom: 10px;
        }
        
        .toolbar {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            justify-content: center;
        }
        
        .toolbar button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 12px 24px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .toolbar button:hover {
            background: #00cc00;
            transform: scale(1.05);
        }
        
        .toolbar a {
            color: #00ffff;
            text-decoration: none;
            border: 1px solid #00ffff;
            padding: 8px 16px;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .toolbar a:hover {
            background: #00ffff;
            color: #000;
        }
        
        .export-area {
            background: #222;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .export-area h2 {
            color: #00ffff;
            margin-bottom: 20px;
            text-shadow: 0 0 5px #00ffff;
        }
        
        .canvas-container {
            background: 
                linear-gradient(45deg, #666 25%, transparent 25%),
                linear-gradient(-45deg, #666 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #666 75%),
                linear-gradient(-45deg, transparent 75%, #666 75%);
            background-size: 16px 16px;
            background-position: 0 0, 0 8px, 8px -8px, -8px 0px;
            border: 2px solid #888;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .canvas-placeholder {
            color: #999;
            font-size: 1.1em;
            text-align: center;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            background: #333;
            padding: 15px;
            border-radius: 6px;
        }
        
        .control-group h3 {
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .control-row:last-child {
            margin-bottom: 0;
        }
        
        .control-row label {
            min-width: 80px;
            font-size: 0.9em;
        }
        
        .control-row input, .control-row select {
            background: #444;
            color: #fff;
            border: 1px solid #666;
            padding: 8px;
            border-radius: 4px;
            font-family: inherit;
            flex: 1;
        }
        
        .control-row input:focus, .control-row select:focus {
            border-color: #00ff00;
            outline: none;
        }
        
        .color-input {
            width: 40px !important;
            height: 32px;
            padding: 2px;
            cursor: pointer;
        }
        
        .templates {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .template-btn {
            background: #555;
            color: #fff;
            border: 1px solid #777;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.8em;
            transition: all 0.3s;
        }
        
        .template-btn:hover {
            background: #666;
            border-color: #00ff00;
        }
        
        .export-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .export-actions button {
            padding: 12px 24px;
            font-size: 1em;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-png {
            background: #ff6b35;
            color: #fff;
            border: 2px solid #ff6b35;
        }
        
        .btn-png:hover {
            background: #ff8555;
            transform: scale(1.05);
        }
        
        .btn-svg {
            background: #4ecdc4;
            color: #000;
            border: 2px solid #4ecdc4;
        }
        
        .btn-svg:hover {
            background: #6eddda;
            transform: scale(1.05);
        }
        
        .status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #333;
            color: #fff;
            padding: 10px 15px;
            border-radius: 4px;
            border-left: 4px solid #00ff00;
            display: none;
            z-index: 1000;
        }
        
        .status.show {
            display: block;
        }
        
        .status.error {
            border-left-color: #ff4444;
            background: #332222;
        }
        
        .recent-exports {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .recent-exports h3 {
            color: #ffd700;
            margin-bottom: 15px;
        }
        
        .recent-item {
            background: #333;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .recent-info {
            flex: 1;
        }
        
        .recent-name {
            color: #fff;
            font-weight: bold;
        }
        
        .recent-details {
            color: #999;
            font-size: 0.8em;
        }
        
        .recent-actions button {
            background: #555;
            color: #fff;
            border: none;
            padding: 4px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8em;
            margin-left: 5px;
        }
        
        @media (max-width: 768px) {
            .controls {
                grid-template-columns: 1fr;
            }
            
            .export-actions {
                flex-direction: column;
            }
            
            .recent-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè¢ Capitalism Station</h1>
            <p>General Asset Exporter</p>
        </header>
        
        <div class="toolbar">
            <a href="../capitalism_assets_checklist_linked_preview.html">‚Üê Back to Checklist</a>
            <a href="../interactive-exporter-rsi.html">üéÆ RSI Exporter</a>
            <button onclick="clearCanvas()">üóëÔ∏è Clear Canvas</button>
            <button onclick="savePreset()">üíæ Save Preset</button>
            <button onclick="loadPreset()">üìÅ Load Preset</button>
        </div>
        
        <div class="export-area">
            <h2>Asset Designer</h2>
            
            <div class="controls">
                <div class="control-group">
                    <h3>üìê Canvas Settings</h3>
                    <div class="control-row">
                        <label>Width:</label>
                        <input type="number" id="canvasWidth" value="32" min="8" max="512">
                    </div>
                    <div class="control-row">
                        <label>Height:</label>
                        <input type="number" id="canvasHeight" value="32" min="8" max="512">
                    </div>
                    <div class="control-row">
                        <label>Background:</label>
                        <input type="color" id="bgColor" value="#2a2a2a" class="color-input">
                    </div>
                    <div class="templates">
                        <button class="template-btn" onclick="setCanvasSize(16, 16)">16√ó16</button>
                        <button class="template-btn" onclick="setCanvasSize(32, 32)">32√ó32</button>
                        <button class="template-btn" onclick="setCanvasSize(64, 64)">64√ó64</button>
                        <button class="template-btn" onclick="setCanvasSize(128, 128)">128√ó128</button>
                    </div>
                </div>
                
                <div class="control-group">
                    <h3>üé® Drawing Tools</h3>
                    <div class="control-row">
                        <label>Tool:</label>
                        <select id="drawingTool">
                            <option value="rect">Rectangle</option>
                            <option value="circle">Circle</option>
                            <option value="line">Line</option>
                            <option value="text">Text</option>
                        </select>
                    </div>
                    <div class="control-row">
                        <label>Fill Color:</label>
                        <input type="color" id="fillColor" value="#00ff00" class="color-input">
                    </div>
                    <div class="control-row">
                        <label>Stroke:</label>
                        <input type="color" id="strokeColor" value="#000000" class="color-input">
                        <input type="number" id="strokeWidth" value="1" min="0" max="10" style="width: 60px;">
                    </div>
                    <div class="templates">
                        <button class="template-btn" onclick="loadTemplate('terminal')">üì∫ Terminal</button>
                        <button class="template-btn" onclick="loadTemplate('icon')">üîò Icon</button>
                        <button class="template-btn" onclick="loadTemplate('badge')">üè∑Ô∏è Badge</button>
                        <button class="template-btn" onclick="loadTemplate('ui')">üñ•Ô∏è UI Element</button>
                    </div>
                </div>
                
                <div class="control-group">
                    <h3>üìù Export Settings</h3>
                    <div class="control-row">
                        <label>Name:</label>
                        <input type="text" id="assetName" value="custom-asset" placeholder="asset-name">
                    </div>
                    <div class="control-row">
                        <label>Scale:</label>
                        <select id="exportScale">
                            <option value="1">1√ó (Original)</option>
                            <option value="2">2√ó (Double)</option>
                            <option value="4">4√ó (Quadruple)</option>
                            <option value="8">8√ó (8√ó)</option>
                        </select>
                    </div>
                    <div class="control-row">
                        <label>Format:</label>
                        <select id="exportFormat">
                            <option value="png">PNG (Raster)</option>
                            <option value="svg">SVG (Vector)</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="canvas-container" id="canvasContainer">
                <div class="canvas-placeholder">
                    Click and drag to draw shapes<br>
                    Use the tools above to customize your asset
                </div>
                <svg id="mainSvg" style="display: none;" xmlns="http://www.w3.org/2000/svg"></svg>
            </div>
            
            <div class="export-actions">
                <button class="btn-png" onclick="downloadPNG()">
                    üìÑ Download PNG
                </button>
                <button class="btn-svg" onclick="downloadSVG()">
                    üìä Download SVG
                </button>
            </div>
        </div>
        
        <div class="recent-exports">
            <h3>üìö Recent Exports</h3>
            <div id="recentList">
                <div class="recent-item">
                    <div class="recent-info">
                        <div class="recent-name">No recent exports</div>
                        <div class="recent-details">Create your first asset above</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="status" id="status"></div>
    
    <script>
        // Global variables
        let currentSvg = null;
        let isDrawing = false;
        let startX = 0, startY = 0;
        let currentShape = null;
        let recentExports = [];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeCanvas();
            loadRecentExports();
            setupEventListeners();
            showStatus('üé® General Asset Exporter ready!');
        });
        
        function showStatus(message, isError = false) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = 'status show' + (isError ? ' error' : '');
            
            setTimeout(() => {
                status.className = 'status';
            }, 3000);
        }
        
        function initializeCanvas() {
            const container = document.getElementById('canvasContainer');
            const width = parseInt(document.getElementById('canvasWidth').value);
            const height = parseInt(document.getElementById('canvasHeight').value);
            const bgColor = document.getElementById('bgColor').value;
            
            // Create SVG
            const svg = document.getElementById('mainSvg');
            svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
            svg.setAttribute('width', Math.min(400, width * 8));
            svg.setAttribute('height', Math.min(400, height * 8));
            svg.style.display = 'block';
            svg.style.imageRendering = 'pixelated';
            svg.style.imageRendering = 'crisp-edges';
            svg.innerHTML = `<rect width="${width}" height="${height}" fill="${bgColor}"/>`;
            
            // Hide placeholder
            container.querySelector('.canvas-placeholder').style.display = 'none';
            
            currentSvg = svg;
        }
        
        function setupEventListeners() {
            const svg = document.getElementById('mainSvg');
            
            svg.addEventListener('mousedown', startDrawing);
            svg.addEventListener('mousemove', draw);
            svg.addEventListener('mouseup', stopDrawing);
            svg.addEventListener('mouseleave', stopDrawing);
            
            // Canvas setting changes
            document.getElementById('canvasWidth').addEventListener('change', initializeCanvas);
            document.getElementById('canvasHeight').addEventListener('change', initializeCanvas);
            document.getElementById('bgColor').addEventListener('change', initializeCanvas);
        }
        
        function getMousePos(event) {
            const svg = currentSvg;
            const rect = svg.getBoundingClientRect();
            const scaleX = parseInt(svg.getAttribute('viewBox').split(' ')[2]) / rect.width;
            const scaleY = parseInt(svg.getAttribute('viewBox').split(' ')[3]) / rect.height;
            
            return {
                x: Math.round((event.clientX - rect.left) * scaleX),
                y: Math.round((event.clientY - rect.top) * scaleY)
            };
        }
        
        function startDrawing(event) {
            isDrawing = true;
            const pos = getMousePos(event);
            startX = pos.x;
            startY = pos.y;
            
            const tool = document.getElementById('drawingTool').value;
            const fill = document.getElementById('fillColor').value;
            const stroke = document.getElementById('strokeColor').value;
            const strokeWidth = document.getElementById('strokeWidth').value;
            
            // Create shape based on tool
            if (tool === 'rect') {
                currentShape = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            } else if (tool === 'circle') {
                currentShape = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            } else if (tool === 'line') {
                currentShape = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            }
            
            if (currentShape) {
                currentShape.setAttribute('fill', fill);
                currentShape.setAttribute('stroke', stroke);
                currentShape.setAttribute('stroke-width', strokeWidth);
                currentSvg.appendChild(currentShape);
            }
        }
        
        function draw(event) {
            if (!isDrawing || !currentShape) return;
            
            const pos = getMousePos(event);
            const tool = document.getElementById('drawingTool').value;
            
            if (tool === 'rect') {
                const x = Math.min(startX, pos.x);
                const y = Math.min(startY, pos.y);
                const width = Math.abs(pos.x - startX);
                const height = Math.abs(pos.y - startY);
                
                currentShape.setAttribute('x', x);
                currentShape.setAttribute('y', y);
                currentShape.setAttribute('width', width);
                currentShape.setAttribute('height', height);
            } else if (tool === 'circle') {
                const radius = Math.sqrt(Math.pow(pos.x - startX, 2) + Math.pow(pos.y - startY, 2));
                currentShape.setAttribute('cx', startX);
                currentShape.setAttribute('cy', startY);
                currentShape.setAttribute('r', radius);
            } else if (tool === 'line') {
                currentShape.setAttribute('x1', startX);
                currentShape.setAttribute('y1', startY);
                currentShape.setAttribute('x2', pos.x);
                currentShape.setAttribute('y2', pos.y);
            }
        }
        
        function stopDrawing() {
            isDrawing = false;
            currentShape = null;
        }
        
        function setCanvasSize(width, height) {
            document.getElementById('canvasWidth').value = width;
            document.getElementById('canvasHeight').value = height;
            initializeCanvas();
        }
        
        function clearCanvas() {
            if (confirm('Clear the canvas? This will remove all drawn elements.')) {
                initializeCanvas();
            }
        }
        
        function loadTemplate(type) {
            clearCanvas();
            
            const templates = {
                terminal: () => {
                    setCanvasSize(64, 48);
                    setTimeout(() => {
                        // Terminal screen
                        const screen = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        screen.setAttribute('x', '4');
                        screen.setAttribute('y', '4');
                        screen.setAttribute('width', '56');
                        screen.setAttribute('height', '40');
                        screen.setAttribute('fill', '#000');
                        screen.setAttribute('stroke', '#666');
                        screen.setAttribute('stroke-width', '2');
                        currentSvg.appendChild(screen);
                        
                        // Terminal text lines
                        for (let i = 0; i < 3; i++) {
                            const line = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                            line.setAttribute('x', '8');
                            line.setAttribute('y', `${8 + i * 8}`);
                            line.setAttribute('width', '48');
                            line.setAttribute('height', '2');
                            line.setAttribute('fill', '#00ff00');
                            currentSvg.appendChild(line);
                        }
                    }, 100);
                },
                
                icon: () => {
                    setCanvasSize(32, 32);
                    setTimeout(() => {
                        // Icon background
                        const bg = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        bg.setAttribute('cx', '16');
                        bg.setAttribute('cy', '16');
                        bg.setAttribute('r', '12');
                        bg.setAttribute('fill', '#0066cc');
                        bg.setAttribute('stroke', '#000');
                        bg.setAttribute('stroke-width', '2');
                        currentSvg.appendChild(bg);
                        
                        // Icon symbol
                        const symbol = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        symbol.setAttribute('x', '12');
                        symbol.setAttribute('y', '12');
                        symbol.setAttribute('width', '8');
                        symbol.setAttribute('height', '8');
                        symbol.setAttribute('fill', '#fff');
                        currentSvg.appendChild(symbol);
                    }, 100);
                },
                
                badge: () => {
                    setCanvasSize(24, 16);
                    setTimeout(() => {
                        // Badge background
                        const bg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        bg.setAttribute('x', '2');
                        bg.setAttribute('y', '2');
                        bg.setAttribute('width', '20');
                        bg.setAttribute('height', '12');
                        bg.setAttribute('rx', '2');
                        bg.setAttribute('fill', '#ffd700');
                        bg.setAttribute('stroke', '#000');
                        bg.setAttribute('stroke-width', '1');
                        currentSvg.appendChild(bg);
                        
                        // Badge text area
                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        text.setAttribute('x', '4');
                        text.setAttribute('y', '4');
                        text.setAttribute('width', '16');
                        text.setAttribute('height', '8');
                        text.setAttribute('fill', '#000');
                        currentSvg.appendChild(text);
                    }, 100);
                },
                
                ui: () => {
                    setCanvasSize(48, 16);
                    setTimeout(() => {
                        // UI button background
                        const bg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        bg.setAttribute('x', '2');
                        bg.setAttribute('y', '2');
                        bg.setAttribute('width', '44');
                        bg.setAttribute('height', '12');
                        bg.setAttribute('fill', '#333');
                        bg.setAttribute('stroke', '#666');
                        bg.setAttribute('stroke-width', '1');
                        currentSvg.appendChild(bg);
                        
                        // UI button highlight
                        const highlight = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        highlight.setAttribute('x', '3');
                        highlight.setAttribute('y', '3');
                        highlight.setAttribute('width', '42');
                        highlight.setAttribute('height', '2');
                        highlight.setAttribute('fill', '#666');
                        currentSvg.appendChild(highlight);
                    }, 100);
                }
            };
            
            if (templates[type]) {
                templates[type]();
                showStatus(`üìã Loaded ${type} template`);
            }
        }
        
        function downloadPNG() {
            try {
                const assetName = document.getElementById('assetName').value || 'custom-asset';
                const scale = parseInt(document.getElementById('exportScale').value);
                
                // Create canvas for PNG export
                const canvas = document.createElement('canvas');
                const svgRect = currentSvg.getBoundingClientRect();
                const viewBox = currentSvg.getAttribute('viewBox').split(' ');
                const width = parseInt(viewBox[2]);
                const height = parseInt(viewBox[3]);
                
                canvas.width = width * scale;
                canvas.height = height * scale;
                
                const ctx = canvas.getContext('2d');
                ctx.imageSmoothingEnabled = false;
                ctx.webkitImageSmoothingEnabled = false;
                ctx.mozImageSmoothingEnabled = false;
                ctx.msImageSmoothingEnabled = false;
                
                // Convert SVG to image
                const svgData = new XMLSerializer().serializeToString(currentSvg);
                const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(svgBlob);
                
                const img = new Image();
                img.onload = () => {
                    ctx.drawImage(img, 0, 0, width * scale, height * scale);
                    URL.revokeObjectURL(url);
                    
                    // Download canvas as PNG
                    canvas.toBlob((blob) => {
                        const downloadUrl = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = downloadUrl;
                        a.download = `${assetName}.png`;
                        a.style.display = 'none';
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(downloadUrl);
                        
                        // Add to recent exports
                        addRecentExport(assetName, 'PNG', `${width * scale}√ó${height * scale}`);
                        showStatus(`‚úÖ Downloaded ${assetName}.png`);
                    }, 'image/png');
                };
                img.onerror = () => {
                    showStatus('‚ùå Failed to export PNG', true);
                };
                img.src = url;
                
            } catch (error) {
                console.error('PNG export error:', error);
                showStatus('‚ùå PNG export failed', true);
            }
        }
        
        function downloadSVG() {
            try {
                const assetName = document.getElementById('assetName').value || 'custom-asset';
                
                // Get SVG data
                const svgData = new XMLSerializer().serializeToString(currentSvg);
                const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
                
                // Download SVG
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${assetName}.svg`;
                a.style.display = 'none';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // Add to recent exports
                const viewBox = currentSvg.getAttribute('viewBox').split(' ');
                addRecentExport(assetName, 'SVG', `${viewBox[2]}√ó${viewBox[3]}`);
                showStatus(`‚úÖ Downloaded ${assetName}.svg`);
                
            } catch (error) {
                console.error('SVG export error:', error);
                showStatus('‚ùå SVG export failed', true);
            }
        }
        
        function addRecentExport(name, format, size) {
            const recent = {
                name,
                format,
                size,
                timestamp: new Date().toLocaleString()
            };
            
            recentExports.unshift(recent);
            recentExports = recentExports.slice(0, 5); // Keep only 5 recent
            
            saveRecentExports();
            updateRecentList();
        }
        
        function saveRecentExports() {
            localStorage.setItem('capitalism_recent_exports', JSON.stringify(recentExports));
        }
        
        function loadRecentExports() {
            const saved = localStorage.getItem('capitalism_recent_exports');
            if (saved) {
                recentExports = JSON.parse(saved);
                updateRecentList();
            }
        }
        
        function updateRecentList() {
            const container = document.getElementById('recentList');
            
            if (recentExports.length === 0) {
                container.innerHTML = `
                    <div class="recent-item">
                        <div class="recent-info">
                            <div class="recent-name">No recent exports</div>
                            <div class="recent-details">Create your first asset above</div>
                        </div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = recentExports.map(item => `
                <div class="recent-item">
                    <div class="recent-info">
                        <div class="recent-name">${item.name}.${item.format.toLowerCase()}</div>
                        <div class="recent-details">${item.size} ‚Ä¢ ${item.timestamp}</div>
                    </div>
                    <div class="recent-actions">
                        <button onclick="removeRecentExport('${item.name}', '${item.timestamp}')">Remove</button>
                    </div>
                </div>
            `).join('');
        }
        
        function removeRecentExport(name, timestamp) {
            recentExports = recentExports.filter(item => !(item.name === name && item.timestamp === timestamp));
            saveRecentExports();
            updateRecentList();
        }
        
        function savePreset() {
            const name = prompt('Enter preset name:');
            if (!name) return;
            
            const preset = {
                name,
                svgData: new XMLSerializer().serializeToString(currentSvg),
                canvasWidth: document.getElementById('canvasWidth').value,
                canvasHeight: document.getElementById('canvasHeight').value,
                bgColor: document.getElementById('bgColor').value,
                timestamp: new Date().toLocaleString()
            };
            
            const presets = JSON.parse(localStorage.getItem('capitalism_presets') || '[]');
            presets.push(preset);
            localStorage.setItem('capitalism_presets', JSON.stringify(presets));
            
            showStatus(`üíæ Preset "${name}" saved`);
        }
        
        function loadPreset() {
            const presets = JSON.parse(localStorage.getItem('capitalism_presets') || '[]');
            if (presets.length === 0) {
                showStatus('‚ùå No presets found', true);
                return;
            }
            
            const presetNames = presets.map((p, i) => `${i + 1}. ${p.name} (${p.timestamp})`).join('\n');
            const choice = prompt(`Select preset:\n${presetNames}\n\nEnter number:`);
            
            const index = parseInt(choice) - 1;
            if (isNaN(index) || index < 0 || index >= presets.length) {
                showStatus('‚ùå Invalid selection', true);
                return;
            }
            
            const preset = presets[index];
            
            // Restore canvas settings
            document.getElementById('canvasWidth').value = preset.canvasWidth;
            document.getElementById('canvasHeight').value = preset.canvasHeight;
            document.getElementById('bgColor').value = preset.bgColor;
            
            // Restore SVG content
            currentSvg.innerHTML = preset.svgData.match(/<svg[^>]*>(.*)<\/svg>/s)[1];
            currentSvg.setAttribute('viewBox', `0 0 ${preset.canvasWidth} ${preset.canvasHeight}`);
            
            showStatus(`üìÅ Preset "${preset.name}" loaded`);
        }
    </script>
</body>
</html>